<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Библия (JSON)</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    select { margin: 10px; padding: 5px; }
    .verse { margin: 5px 0; }
  </style>
</head>
<body>
  <h1>Библия</h1>

  <label for="book">Выберите книгу:</label>
  <select id="book"></select>

  <label for="chapter">Выберите главу:</label>
  <select id="chapter"></select>

  <div id="content"></div>

  <script>
    const books = [
      {name: "Бытие", file: "genesis.json"},
      {name: "Исход", file: "exodus.json"},
      {name: "Левит", file: "leviticus.json"}
      // сюда можно добавить остальные книги
    ];

    const bookSelect = document.getElementById("book");
    const chapterSelect = document.getElementById("chapter");
    const content = document.getElementById("content");

    let currentData = null;

    // Заполняем список книг
    books.forEach((b, i) => {
      const option = document.createElement("option");
      option.value = i;
      option.textContent = b.name;
      bookSelect.appendChild(option);
    });

    async function loadBook(index) {
      const book = books[index];
      const response = await fetch(book.file);
      currentData = await response.json();

      // Заполняем список глав
      chapterSelect.innerHTML = "";
      currentData.chapters.forEach(ch => {
        let option = document.createElement("option");
        option.value = ch.number;
        option.textContent = "Глава " + ch.number;
        chapterSelect.appendChild(option);
      });

      // Показываем первую главу
      showChapter(currentData.chapters[0].number);
    }

    function showChapter(num) {
      content.innerHTML = "";
      let chapter = currentData.chapters.find(ch => ch.number == num);
      chapter.verses.forEach(v => {
        let div = document.createElement("div");
        div.className = "verse";
        div.textContent = v.num + ". " + v.text;
        content.appendChild(div);
      });
    }

    // Событие смены книги
    bookSelect.addEventListener("change", (e) => {
      loadBook(e.target.value);
    });

    // Событие смены главы
    chapterSelect.addEventListener("change", (e) => {
      showChapter(e.target.value);
    });

    // Загружаем первую книгу по умолчанию
    loadBook(0);
  </script>
</body>
</html>
